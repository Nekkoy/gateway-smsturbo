# gateway-smsturbo
SMS Gateway для сервиса [turbosms.ua](https://turbosms.ua/ua/)

Установка:
```
composer require nekkoy/gateway-smsturbo
```

Конфигурация `.env`
===============
```
# Включить/выключить модуль
SMSTURBO_ENABLED=true

# Ключь API
SMSTURBO_API_KEY=

# Имя отправителя в СМС
SMSTURBO_SMS_NAME=

# Имя отправителя в Viber
SMSTURBO_VIBER_NAME=

# Флажок транзационного сообщения: 1 - да, какие-либо другие значения или отсутствие этого параметра - нет
# Отправка транзакционных сообщений от общего отправителя запрещена.
# Все транзакционные сообщения, отправляемые на номера Украины, должны соответствовать заранее зарегистрированным шаблонам.
# Если при отправке транзакционного сообщения не будет найден соответствующий шаблон, то оно будет отклонено с кодом NOT_ALLOWED_MESSAGE_TRANSACTION_PATTERN.
# Не исключены ситуации, когда шаблон будет найден у нас, но Viber по каким-то причинам не найдет его у себя, в таком случае уведомление будет протарифицировано как рекламное.
# Мы стараемся обнаруживать подобные случаи, чтобы наши клиенты могли оперативно внести изменения в шаблон и получить цену транзакционного сообщения.
SMSTURBO_TRANSACTIONAL=0
```

Использование
===============

Создайте DTO сообщения, передав первым параметром текст, а вторым — номер получателя:
```
$message = new \Nekkoy\GatewayAbstract\DTO\MessageDTO("test", "+380123456789");
```

Затем вызовите метод отправки сообщения через фасад:
```
/** @var \Nekkoy\GatewayAbstract\DTO\ResponseDTO $response */
$response = \Nekkoy\GatewaySmsturbo\Facades\GatewaySmsturbo::send($message);
```

Метод возвращает DTO-ответ с параметрами:
 - message - сообщение об успешной отправке или ошибке
 - code - код ответа:
   - code < 0 - ошибка модуля
   - code > 0 - ошибка HTTP
   - code = 0 - успех
 - id - ID сообщения
